# serializer version: 1
# name: test_fallbacks[chain]
  '''
  {
    "lc": 1,
    "type": "constructor",
    "id": [
      "langchain",
      "schema",
      "runnable",
      "RunnableSequence"
    ],
    "kwargs": {
      "first": {
        "lc": 1,
        "type": "constructor",
        "id": [
          "langchain",
          "schema",
          "runnable",
          "RunnableParallel"
        ],
        "kwargs": {
          "steps": {
            "buz": {
              "lc": 1,
              "type": "not_implemented",
              "id": [
                "langchain_core",
                "runnables",
                "base",
                "RunnableLambda"
              ],
              "repr": "RunnableLambda(lambda x: x)"
            }
          }
        },
        "graph": {
          "nodes": [
            {
              "id": 0,
              "data": {
                "title": "RunnableParallel<buz>Input",
                "type": "object",
                "properties": {}
              }
            },
            {
              "id": 1,
              "data": {
                "title": "RunnableParallel<buz>Output",
                "type": "object",
                "properties": {
                  "buz": {
                    "title": "Buz"
                  }
                }
              }
            },
            {
              "id": 2,
              "data": "Lambda(lambda x: x)"
            }
          ],
          "edges": [
            {
              "source": 0,
              "target": 2
            },
            {
              "source": 2,
              "target": 1
            }
          ]
        }
      },
      "middle": [],
      "last": {
        "lc": 1,
        "type": "constructor",
        "id": [
          "langchain",
          "schema",
          "runnable",
          "RunnableWithFallbacks"
        ],
        "kwargs": {
          "runnable": {
            "lc": 1,
            "type": "constructor",
            "id": [
              "langchain",
              "schema",
              "runnable",
              "RunnableSequence"
            ],
            "kwargs": {
              "first": {
                "lc": 1,
                "type": "constructor",
                "id": [
                  "langchain",
                  "prompts",
                  "prompt",
                  "PromptTemplate"
                ],
                "kwargs": {
                  "input_variables": [
                    "buz"
                  ],
                  "template": "what did baz say to {buz}",
                  "template_format": "f-string",
                  "partial_variables": {}
                },
                "graph": {
                  "nodes": [
                    {
                      "id": 0,
                      "data": {
                        "title": "PromptInput",
                        "type": "object",
                        "properties": {
                          "buz": {
                            "title": "Buz",
                            "type": "string"
                          }
                        }
                      }
                    },
                    {
                      "id": 1,
                      "data": "PromptTemplate"
                    },
                    {
                      "id": 2,
                      "data": {
                        "title": "PromptTemplateOutput",
                        "anyOf": [
                          {
                            "$ref": "#/definitions/StringPromptValue"
                          },
                          {
                            "$ref": "#/definitions/ChatPromptValueConcrete"
                          }
                        ],
                        "definitions": {
                          "StringPromptValue": {
                            "title": "StringPromptValue",
                            "description": "String prompt value.",
                            "type": "object",
                            "properties": {
                              "text": {
                                "title": "Text",
                                "type": "string"
                              },
                              "type": {
                                "title": "Type",
                                "default": "StringPromptValue",
                                "enum": [
                                  "StringPromptValue"
                                ],
                                "type": "string"
                              }
                            },
                            "required": [
                              "text"
                            ]
                          },
                          "AIMessage": {
                            "title": "AIMessage",
                            "description": "Message from an AI.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "ai",
                                "enum": [
                                  "ai"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "example": {
                                "title": "Example",
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "content"
                            ]
                          },
                          "HumanMessage": {
                            "title": "HumanMessage",
                            "description": "Message from a human.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "human",
                                "enum": [
                                  "human"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "example": {
                                "title": "Example",
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "content"
                            ]
                          },
                          "ChatMessage": {
                            "title": "ChatMessage",
                            "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "chat",
                                "enum": [
                                  "chat"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "role": {
                                "title": "Role",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content",
                              "role"
                            ]
                          },
                          "SystemMessage": {
                            "title": "SystemMessage",
                            "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "system",
                                "enum": [
                                  "system"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content"
                            ]
                          },
                          "FunctionMessage": {
                            "title": "FunctionMessage",
                            "description": "Message for passing the result of executing a function back to a model.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "function",
                                "enum": [
                                  "function"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content",
                              "name"
                            ]
                          },
                          "ToolMessage": {
                            "title": "ToolMessage",
                            "description": "Message for passing the result of executing a tool back to a model.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "tool",
                                "enum": [
                                  "tool"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "tool_call_id": {
                                "title": "Tool Call Id",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content",
                              "tool_call_id"
                            ]
                          },
                          "ChatPromptValueConcrete": {
                            "title": "ChatPromptValueConcrete",
                            "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                            "type": "object",
                            "properties": {
                              "messages": {
                                "title": "Messages",
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "$ref": "#/definitions/AIMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/HumanMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/ChatMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/SystemMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/FunctionMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/ToolMessage"
                                    }
                                  ]
                                }
                              },
                              "type": {
                                "title": "Type",
                                "default": "ChatPromptValueConcrete",
                                "enum": [
                                  "ChatPromptValueConcrete"
                                ],
                                "type": "string"
                              }
                            },
                            "required": [
                              "messages"
                            ]
                          }
                        }
                      }
                    }
                  ],
                  "edges": [
                    {
                      "source": 0,
                      "target": 1
                    },
                    {
                      "source": 1,
                      "target": 2
                    }
                  ]
                }
              },
              "middle": [],
              "last": {
                "lc": 1,
                "type": "not_implemented",
                "id": [
                  "tests",
                  "unit_tests",
                  "fake",
                  "llm",
                  "FakeListLLM"
                ],
                "repr": "FakeListLLM(responses=['foo'], i=1)",
                "graph": {
                  "nodes": [
                    {
                      "id": 0,
                      "data": {
                        "title": "FakeListLLMInput",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/definitions/StringPromptValue"
                          },
                          {
                            "$ref": "#/definitions/ChatPromptValueConcrete"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "$ref": "#/definitions/AIMessage"
                                },
                                {
                                  "$ref": "#/definitions/HumanMessage"
                                },
                                {
                                  "$ref": "#/definitions/ChatMessage"
                                },
                                {
                                  "$ref": "#/definitions/SystemMessage"
                                },
                                {
                                  "$ref": "#/definitions/FunctionMessage"
                                },
                                {
                                  "$ref": "#/definitions/ToolMessage"
                                }
                              ]
                            }
                          }
                        ],
                        "definitions": {
                          "StringPromptValue": {
                            "title": "StringPromptValue",
                            "description": "String prompt value.",
                            "type": "object",
                            "properties": {
                              "text": {
                                "title": "Text",
                                "type": "string"
                              },
                              "type": {
                                "title": "Type",
                                "default": "StringPromptValue",
                                "enum": [
                                  "StringPromptValue"
                                ],
                                "type": "string"
                              }
                            },
                            "required": [
                              "text"
                            ]
                          },
                          "AIMessage": {
                            "title": "AIMessage",
                            "description": "Message from an AI.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "ai",
                                "enum": [
                                  "ai"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "example": {
                                "title": "Example",
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "content"
                            ]
                          },
                          "HumanMessage": {
                            "title": "HumanMessage",
                            "description": "Message from a human.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "human",
                                "enum": [
                                  "human"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "example": {
                                "title": "Example",
                                "default": false,
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "content"
                            ]
                          },
                          "ChatMessage": {
                            "title": "ChatMessage",
                            "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "chat",
                                "enum": [
                                  "chat"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "role": {
                                "title": "Role",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content",
                              "role"
                            ]
                          },
                          "SystemMessage": {
                            "title": "SystemMessage",
                            "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "system",
                                "enum": [
                                  "system"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content"
                            ]
                          },
                          "FunctionMessage": {
                            "title": "FunctionMessage",
                            "description": "Message for passing the result of executing a function back to a model.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "function",
                                "enum": [
                                  "function"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content",
                              "name"
                            ]
                          },
                          "ToolMessage": {
                            "title": "ToolMessage",
                            "description": "Message for passing the result of executing a tool back to a model.",
                            "type": "object",
                            "properties": {
                              "content": {
                                "title": "Content",
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "object"
                                        }
                                      ]
                                    }
                                  }
                                ]
                              },
                              "additional_kwargs": {
                                "title": "Additional Kwargs",
                                "type": "object"
                              },
                              "type": {
                                "title": "Type",
                                "default": "tool",
                                "enum": [
                                  "tool"
                                ],
                                "type": "string"
                              },
                              "name": {
                                "title": "Name",
                                "type": "string"
                              },
                              "tool_call_id": {
                                "title": "Tool Call Id",
                                "type": "string"
                              }
                            },
                            "required": [
                              "content",
                              "tool_call_id"
                            ]
                          },
                          "ChatPromptValueConcrete": {
                            "title": "ChatPromptValueConcrete",
                            "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                            "type": "object",
                            "properties": {
                              "messages": {
                                "title": "Messages",
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "$ref": "#/definitions/AIMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/HumanMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/ChatMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/SystemMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/FunctionMessage"
                                    },
                                    {
                                      "$ref": "#/definitions/ToolMessage"
                                    }
                                  ]
                                }
                              },
                              "type": {
                                "title": "Type",
                                "default": "ChatPromptValueConcrete",
                                "enum": [
                                  "ChatPromptValueConcrete"
                                ],
                                "type": "string"
                              }
                            },
                            "required": [
                              "messages"
                            ]
                          }
                        }
                      }
                    },
                    {
                      "id": 1,
                      "data": "FakeListLLM"
                    },
                    {
                      "id": 2,
                      "data": {
                        "title": "FakeListLLMOutput",
                        "type": "string"
                      }
                    }
                  ],
                  "edges": [
                    {
                      "source": 0,
                      "target": 1
                    },
                    {
                      "source": 1,
                      "target": 2
                    }
                  ]
                }
              },
              "name": null
            },
            "graph": {
              "nodes": [
                {
                  "id": 0,
                  "data": {
                    "title": "PromptInput",
                    "type": "object",
                    "properties": {
                      "buz": {
                        "title": "Buz",
                        "type": "string"
                      }
                    }
                  }
                },
                {
                  "id": 1,
                  "data": "PromptTemplate"
                },
                {
                  "id": 2,
                  "data": "FakeListLLM"
                },
                {
                  "id": 3,
                  "data": {
                    "title": "FakeListLLMOutput",
                    "type": "string"
                  }
                }
              ],
              "edges": [
                {
                  "source": 0,
                  "target": 1
                },
                {
                  "source": 2,
                  "target": 3
                },
                {
                  "source": 1,
                  "target": 2
                }
              ]
            }
          },
          "fallbacks": [
            {
              "lc": 1,
              "type": "constructor",
              "id": [
                "langchain",
                "schema",
                "runnable",
                "RunnableSequence"
              ],
              "kwargs": {
                "first": {
                  "lc": 1,
                  "type": "constructor",
                  "id": [
                    "langchain",
                    "prompts",
                    "prompt",
                    "PromptTemplate"
                  ],
                  "kwargs": {
                    "input_variables": [
                      "buz"
                    ],
                    "template": "what did baz say to {buz}",
                    "template_format": "f-string",
                    "partial_variables": {}
                  },
                  "graph": {
                    "nodes": [
                      {
                        "id": 0,
                        "data": {
                          "title": "PromptInput",
                          "type": "object",
                          "properties": {
                            "buz": {
                              "title": "Buz",
                              "type": "string"
                            }
                          }
                        }
                      },
                      {
                        "id": 1,
                        "data": "PromptTemplate"
                      },
                      {
                        "id": 2,
                        "data": {
                          "title": "PromptTemplateOutput",
                          "anyOf": [
                            {
                              "$ref": "#/definitions/StringPromptValue"
                            },
                            {
                              "$ref": "#/definitions/ChatPromptValueConcrete"
                            }
                          ],
                          "definitions": {
                            "StringPromptValue": {
                              "title": "StringPromptValue",
                              "description": "String prompt value.",
                              "type": "object",
                              "properties": {
                                "text": {
                                  "title": "Text",
                                  "type": "string"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "StringPromptValue",
                                  "enum": [
                                    "StringPromptValue"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "text"
                              ]
                            },
                            "AIMessage": {
                              "title": "AIMessage",
                              "description": "Message from an AI.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "ai",
                                  "enum": [
                                    "ai"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "example": {
                                  "title": "Example",
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "content"
                              ]
                            },
                            "HumanMessage": {
                              "title": "HumanMessage",
                              "description": "Message from a human.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "human",
                                  "enum": [
                                    "human"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "example": {
                                  "title": "Example",
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "content"
                              ]
                            },
                            "ChatMessage": {
                              "title": "ChatMessage",
                              "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "chat",
                                  "enum": [
                                    "chat"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "role": {
                                  "title": "Role",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content",
                                "role"
                              ]
                            },
                            "SystemMessage": {
                              "title": "SystemMessage",
                              "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "system",
                                  "enum": [
                                    "system"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content"
                              ]
                            },
                            "FunctionMessage": {
                              "title": "FunctionMessage",
                              "description": "Message for passing the result of executing a function back to a model.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "function",
                                  "enum": [
                                    "function"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content",
                                "name"
                              ]
                            },
                            "ToolMessage": {
                              "title": "ToolMessage",
                              "description": "Message for passing the result of executing a tool back to a model.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "tool",
                                  "enum": [
                                    "tool"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "tool_call_id": {
                                  "title": "Tool Call Id",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content",
                                "tool_call_id"
                              ]
                            },
                            "ChatPromptValueConcrete": {
                              "title": "ChatPromptValueConcrete",
                              "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                              "type": "object",
                              "properties": {
                                "messages": {
                                  "title": "Messages",
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "$ref": "#/definitions/AIMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/HumanMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/ChatMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/SystemMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/FunctionMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/ToolMessage"
                                      }
                                    ]
                                  }
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "ChatPromptValueConcrete",
                                  "enum": [
                                    "ChatPromptValueConcrete"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "messages"
                              ]
                            }
                          }
                        }
                      }
                    ],
                    "edges": [
                      {
                        "source": 0,
                        "target": 1
                      },
                      {
                        "source": 1,
                        "target": 2
                      }
                    ]
                  }
                },
                "middle": [],
                "last": {
                  "lc": 1,
                  "type": "not_implemented",
                  "id": [
                    "tests",
                    "unit_tests",
                    "fake",
                    "llm",
                    "FakeListLLM"
                  ],
                  "repr": "FakeListLLM(responses=['bar'])",
                  "graph": {
                    "nodes": [
                      {
                        "id": 0,
                        "data": {
                          "title": "FakeListLLMInput",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/definitions/StringPromptValue"
                            },
                            {
                              "$ref": "#/definitions/ChatPromptValueConcrete"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/AIMessage"
                                  },
                                  {
                                    "$ref": "#/definitions/HumanMessage"
                                  },
                                  {
                                    "$ref": "#/definitions/ChatMessage"
                                  },
                                  {
                                    "$ref": "#/definitions/SystemMessage"
                                  },
                                  {
                                    "$ref": "#/definitions/FunctionMessage"
                                  },
                                  {
                                    "$ref": "#/definitions/ToolMessage"
                                  }
                                ]
                              }
                            }
                          ],
                          "definitions": {
                            "StringPromptValue": {
                              "title": "StringPromptValue",
                              "description": "String prompt value.",
                              "type": "object",
                              "properties": {
                                "text": {
                                  "title": "Text",
                                  "type": "string"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "StringPromptValue",
                                  "enum": [
                                    "StringPromptValue"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "text"
                              ]
                            },
                            "AIMessage": {
                              "title": "AIMessage",
                              "description": "Message from an AI.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "ai",
                                  "enum": [
                                    "ai"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "example": {
                                  "title": "Example",
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "content"
                              ]
                            },
                            "HumanMessage": {
                              "title": "HumanMessage",
                              "description": "Message from a human.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "human",
                                  "enum": [
                                    "human"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "example": {
                                  "title": "Example",
                                  "default": false,
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "content"
                              ]
                            },
                            "ChatMessage": {
                              "title": "ChatMessage",
                              "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "chat",
                                  "enum": [
                                    "chat"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "role": {
                                  "title": "Role",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content",
                                "role"
                              ]
                            },
                            "SystemMessage": {
                              "title": "SystemMessage",
                              "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "system",
                                  "enum": [
                                    "system"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content"
                              ]
                            },
                            "FunctionMessage": {
                              "title": "FunctionMessage",
                              "description": "Message for passing the result of executing a function back to a model.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "function",
                                  "enum": [
                                    "function"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content",
                                "name"
                              ]
                            },
                            "ToolMessage": {
                              "title": "ToolMessage",
                              "description": "Message for passing the result of executing a tool back to a model.",
                              "type": "object",
                              "properties": {
                                "content": {
                                  "title": "Content",
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "type": "object"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                },
                                "additional_kwargs": {
                                  "title": "Additional Kwargs",
                                  "type": "object"
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "tool",
                                  "enum": [
                                    "tool"
                                  ],
                                  "type": "string"
                                },
                                "name": {
                                  "title": "Name",
                                  "type": "string"
                                },
                                "tool_call_id": {
                                  "title": "Tool Call Id",
                                  "type": "string"
                                }
                              },
                              "required": [
                                "content",
                                "tool_call_id"
                              ]
                            },
                            "ChatPromptValueConcrete": {
                              "title": "ChatPromptValueConcrete",
                              "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                              "type": "object",
                              "properties": {
                                "messages": {
                                  "title": "Messages",
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "$ref": "#/definitions/AIMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/HumanMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/ChatMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/SystemMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/FunctionMessage"
                                      },
                                      {
                                        "$ref": "#/definitions/ToolMessage"
                                      }
                                    ]
                                  }
                                },
                                "type": {
                                  "title": "Type",
                                  "default": "ChatPromptValueConcrete",
                                  "enum": [
                                    "ChatPromptValueConcrete"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "messages"
                              ]
                            }
                          }
                        }
                      },
                      {
                        "id": 1,
                        "data": "FakeListLLM"
                      },
                      {
                        "id": 2,
                        "data": {
                          "title": "FakeListLLMOutput",
                          "type": "string"
                        }
                      }
                    ],
                    "edges": [
                      {
                        "source": 0,
                        "target": 1
                      },
                      {
                        "source": 1,
                        "target": 2
                      }
                    ]
                  }
                },
                "name": null
              },
              "graph": {
                "nodes": [
                  {
                    "id": 0,
                    "data": {
                      "title": "PromptInput",
                      "type": "object",
                      "properties": {
                        "buz": {
                          "title": "Buz",
                          "type": "string"
                        }
                      }
                    }
                  },
                  {
                    "id": 1,
                    "data": "PromptTemplate"
                  },
                  {
                    "id": 2,
                    "data": "FakeListLLM"
                  },
                  {
                    "id": 3,
                    "data": {
                      "title": "FakeListLLMOutput",
                      "type": "string"
                    }
                  }
                ],
                "edges": [
                  {
                    "source": 0,
                    "target": 1
                  },
                  {
                    "source": 2,
                    "target": 3
                  },
                  {
                    "source": 1,
                    "target": 2
                  }
                ]
              }
            }
          ],
          "exceptions_to_handle": [
            {
              "lc": 1,
              "type": "not_implemented",
              "id": [
                "builtins",
                "Exception"
              ],
              "repr": "<class 'Exception'>"
            }
          ],
          "exception_key": null
        },
        "graph": {
          "nodes": [
            {
              "id": 0,
              "data": {
                "title": "PromptInput",
                "type": "object",
                "properties": {
                  "buz": {
                    "title": "Buz",
                    "type": "string"
                  }
                }
              }
            },
            {
              "id": 1,
              "data": "WithFallbacks"
            },
            {
              "id": 2,
              "data": {
                "title": "FakeListLLMOutput",
                "type": "string"
              }
            }
          ],
          "edges": [
            {
              "source": 0,
              "target": 1
            },
            {
              "source": 1,
              "target": 2
            }
          ]
        }
      },
      "name": null
    },
    "graph": {
      "nodes": [
        {
          "id": 0,
          "data": {
            "title": "RunnableParallel<buz>Input",
            "type": "object",
            "properties": {}
          }
        },
        {
          "id": 1,
          "data": "Lambda(lambda x: x)"
        },
        {
          "id": 2,
          "data": "WithFallbacks"
        },
        {
          "id": 3,
          "data": {
            "title": "FakeListLLMOutput",
            "type": "string"
          }
        }
      ],
      "edges": [
        {
          "source": 0,
          "target": 1
        },
        {
          "source": 2,
          "target": 3
        },
        {
          "source": 1,
          "target": 2
        }
      ]
    }
  }
  '''
# ---
# name: test_fallbacks[chain_pass_exceptions]
  '''
  {
    "lc": 1,
    "type": "constructor",
    "id": [
      "langchain",
      "schema",
      "runnable",
      "RunnableSequence"
    ],
    "kwargs": {
      "first": {
        "lc": 1,
        "type": "constructor",
        "id": [
          "langchain",
          "schema",
          "runnable",
          "RunnableParallel"
        ],
        "kwargs": {
          "steps": {
            "text": {
              "lc": 1,
              "type": "constructor",
              "id": [
                "langchain",
                "schema",
                "runnable",
                "RunnablePassthrough"
              ],
              "kwargs": {
                "func": null,
                "afunc": null,
                "input_type": null
              },
              "graph": {
                "nodes": [
                  {
                    "id": 0,
                    "data": {
                      "title": "RunnablePassthroughInput"
                    }
                  },
                  {
                    "id": 1,
                    "data": "Passthrough"
                  },
                  {
                    "id": 2,
                    "data": {
                      "title": "RunnablePassthroughOutput"
                    }
                  }
                ],
                "edges": [
                  {
                    "source": 0,
                    "target": 1
                  },
                  {
                    "source": 1,
                    "target": 2
                  }
                ]
              }
            }
          }
        },
        "graph": {
          "nodes": [
            {
              "id": 0,
              "data": {
                "title": "RunnableParallel<text>Input",
                "type": "object",
                "properties": {}
              }
            },
            {
              "id": 1,
              "data": {
                "title": "RunnableParallel<text>Output",
                "type": "object",
                "properties": {
                  "text": {
                    "title": "Text"
                  }
                }
              }
            },
            {
              "id": 2,
              "data": "Passthrough"
            }
          ],
          "edges": [
            {
              "source": 0,
              "target": 2
            },
            {
              "source": 2,
              "target": 1
            }
          ]
        }
      },
      "middle": [],
      "last": {
        "lc": 1,
        "type": "constructor",
        "id": [
          "langchain",
          "schema",
          "runnable",
          "RunnableWithFallbacks"
        ],
        "kwargs": {
          "runnable": {
            "lc": 1,
            "type": "not_implemented",
            "id": [
              "langchain_core",
              "runnables",
              "base",
              "RunnableLambda"
            ],
            "repr": "RunnableLambda(_raise_error)"
          },
          "fallbacks": [
            {
              "lc": 1,
              "type": "not_implemented",
              "id": [
                "langchain_core",
                "runnables",
                "base",
                "RunnableLambda"
              ],
              "repr": "RunnableLambda(_dont_raise_error)"
            }
          ],
          "exceptions_to_handle": [
            {
              "lc": 1,
              "type": "not_implemented",
              "id": [
                "builtins",
                "Exception"
              ],
              "repr": "<class 'Exception'>"
            }
          ],
          "exception_key": "exception"
        },
        "graph": {
          "nodes": [
            {
              "id": 0,
              "data": {
                "title": "_raise_error_input",
                "type": "object"
              }
            },
            {
              "id": 1,
              "data": "WithFallbacks"
            },
            {
              "id": 2,
              "data": {
                "title": "_raise_error_output",
                "type": "string"
              }
            }
          ],
          "edges": [
            {
              "source": 0,
              "target": 1
            },
            {
              "source": 1,
              "target": 2
            }
          ]
        }
      },
      "name": null
    },
    "graph": {
      "nodes": [
        {
          "id": 0,
          "data": {
            "title": "RunnableParallel<text>Input",
            "type": "object",
            "properties": {}
          }
        },
        {
          "id": 1,
          "data": "Passthrough"
        },
        {
          "id": 2,
          "data": "WithFallbacks"
        },
        {
          "id": 3,
          "data": {
            "title": "_raise_error_output",
            "type": "string"
          }
        }
      ],
      "edges": [
        {
          "source": 0,
          "target": 1
        },
        {
          "source": 2,
          "target": 3
        },
        {
          "source": 1,
          "target": 2
        }
      ]
    }
  }
  '''
# ---
# name: test_fallbacks[llm]
  '''
  {
    "lc": 1,
    "type": "constructor",
    "id": [
      "langchain",
      "schema",
      "runnable",
      "RunnableWithFallbacks"
    ],
    "kwargs": {
      "runnable": {
        "lc": 1,
        "type": "not_implemented",
        "id": [
          "tests",
          "unit_tests",
          "fake",
          "llm",
          "FakeListLLM"
        ],
        "repr": "FakeListLLM(responses=['foo'], i=1)",
        "graph": {
          "nodes": [
            {
              "id": 0,
              "data": {
                "title": "FakeListLLMInput",
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "$ref": "#/definitions/StringPromptValue"
                  },
                  {
                    "$ref": "#/definitions/ChatPromptValueConcrete"
                  },
                  {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/AIMessage"
                        },
                        {
                          "$ref": "#/definitions/HumanMessage"
                        },
                        {
                          "$ref": "#/definitions/ChatMessage"
                        },
                        {
                          "$ref": "#/definitions/SystemMessage"
                        },
                        {
                          "$ref": "#/definitions/FunctionMessage"
                        },
                        {
                          "$ref": "#/definitions/ToolMessage"
                        }
                      ]
                    }
                  }
                ],
                "definitions": {
                  "StringPromptValue": {
                    "title": "StringPromptValue",
                    "description": "String prompt value.",
                    "type": "object",
                    "properties": {
                      "text": {
                        "title": "Text",
                        "type": "string"
                      },
                      "type": {
                        "title": "Type",
                        "default": "StringPromptValue",
                        "enum": [
                          "StringPromptValue"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "text"
                    ]
                  },
                  "AIMessage": {
                    "title": "AIMessage",
                    "description": "Message from an AI.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "ai",
                        "enum": [
                          "ai"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "example": {
                        "title": "Example",
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "content"
                    ]
                  },
                  "HumanMessage": {
                    "title": "HumanMessage",
                    "description": "Message from a human.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "human",
                        "enum": [
                          "human"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "example": {
                        "title": "Example",
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "content"
                    ]
                  },
                  "ChatMessage": {
                    "title": "ChatMessage",
                    "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "chat",
                        "enum": [
                          "chat"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "role": {
                        "title": "Role",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content",
                      "role"
                    ]
                  },
                  "SystemMessage": {
                    "title": "SystemMessage",
                    "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "system",
                        "enum": [
                          "system"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content"
                    ]
                  },
                  "FunctionMessage": {
                    "title": "FunctionMessage",
                    "description": "Message for passing the result of executing a function back to a model.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "function",
                        "enum": [
                          "function"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content",
                      "name"
                    ]
                  },
                  "ToolMessage": {
                    "title": "ToolMessage",
                    "description": "Message for passing the result of executing a tool back to a model.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "tool",
                        "enum": [
                          "tool"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "tool_call_id": {
                        "title": "Tool Call Id",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content",
                      "tool_call_id"
                    ]
                  },
                  "ChatPromptValueConcrete": {
                    "title": "ChatPromptValueConcrete",
                    "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                    "type": "object",
                    "properties": {
                      "messages": {
                        "title": "Messages",
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "$ref": "#/definitions/AIMessage"
                            },
                            {
                              "$ref": "#/definitions/HumanMessage"
                            },
                            {
                              "$ref": "#/definitions/ChatMessage"
                            },
                            {
                              "$ref": "#/definitions/SystemMessage"
                            },
                            {
                              "$ref": "#/definitions/FunctionMessage"
                            },
                            {
                              "$ref": "#/definitions/ToolMessage"
                            }
                          ]
                        }
                      },
                      "type": {
                        "title": "Type",
                        "default": "ChatPromptValueConcrete",
                        "enum": [
                          "ChatPromptValueConcrete"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "messages"
                    ]
                  }
                }
              }
            },
            {
              "id": 1,
              "data": "FakeListLLM"
            },
            {
              "id": 2,
              "data": {
                "title": "FakeListLLMOutput",
                "type": "string"
              }
            }
          ],
          "edges": [
            {
              "source": 0,
              "target": 1
            },
            {
              "source": 1,
              "target": 2
            }
          ]
        }
      },
      "fallbacks": [
        {
          "lc": 1,
          "type": "not_implemented",
          "id": [
            "tests",
            "unit_tests",
            "fake",
            "llm",
            "FakeListLLM"
          ],
          "repr": "FakeListLLM(responses=['bar'])",
          "graph": {
            "nodes": [
              {
                "id": 0,
                "data": {
                  "title": "FakeListLLMInput",
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/definitions/StringPromptValue"
                    },
                    {
                      "$ref": "#/definitions/ChatPromptValueConcrete"
                    },
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "$ref": "#/definitions/AIMessage"
                          },
                          {
                            "$ref": "#/definitions/HumanMessage"
                          },
                          {
                            "$ref": "#/definitions/ChatMessage"
                          },
                          {
                            "$ref": "#/definitions/SystemMessage"
                          },
                          {
                            "$ref": "#/definitions/FunctionMessage"
                          },
                          {
                            "$ref": "#/definitions/ToolMessage"
                          }
                        ]
                      }
                    }
                  ],
                  "definitions": {
                    "StringPromptValue": {
                      "title": "StringPromptValue",
                      "description": "String prompt value.",
                      "type": "object",
                      "properties": {
                        "text": {
                          "title": "Text",
                          "type": "string"
                        },
                        "type": {
                          "title": "Type",
                          "default": "StringPromptValue",
                          "enum": [
                            "StringPromptValue"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "text"
                      ]
                    },
                    "AIMessage": {
                      "title": "AIMessage",
                      "description": "Message from an AI.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "ai",
                          "enum": [
                            "ai"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "example": {
                          "title": "Example",
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "HumanMessage": {
                      "title": "HumanMessage",
                      "description": "Message from a human.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "human",
                          "enum": [
                            "human"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "example": {
                          "title": "Example",
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "ChatMessage": {
                      "title": "ChatMessage",
                      "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "chat",
                          "enum": [
                            "chat"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "role": {
                          "title": "Role",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "role"
                      ]
                    },
                    "SystemMessage": {
                      "title": "SystemMessage",
                      "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "system",
                          "enum": [
                            "system"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "FunctionMessage": {
                      "title": "FunctionMessage",
                      "description": "Message for passing the result of executing a function back to a model.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "function",
                          "enum": [
                            "function"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "name"
                      ]
                    },
                    "ToolMessage": {
                      "title": "ToolMessage",
                      "description": "Message for passing the result of executing a tool back to a model.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "tool",
                          "enum": [
                            "tool"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "tool_call_id": {
                          "title": "Tool Call Id",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "tool_call_id"
                      ]
                    },
                    "ChatPromptValueConcrete": {
                      "title": "ChatPromptValueConcrete",
                      "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                      "type": "object",
                      "properties": {
                        "messages": {
                          "title": "Messages",
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "$ref": "#/definitions/AIMessage"
                              },
                              {
                                "$ref": "#/definitions/HumanMessage"
                              },
                              {
                                "$ref": "#/definitions/ChatMessage"
                              },
                              {
                                "$ref": "#/definitions/SystemMessage"
                              },
                              {
                                "$ref": "#/definitions/FunctionMessage"
                              },
                              {
                                "$ref": "#/definitions/ToolMessage"
                              }
                            ]
                          }
                        },
                        "type": {
                          "title": "Type",
                          "default": "ChatPromptValueConcrete",
                          "enum": [
                            "ChatPromptValueConcrete"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "messages"
                      ]
                    }
                  }
                }
              },
              {
                "id": 1,
                "data": "FakeListLLM"
              },
              {
                "id": 2,
                "data": {
                  "title": "FakeListLLMOutput",
                  "type": "string"
                }
              }
            ],
            "edges": [
              {
                "source": 0,
                "target": 1
              },
              {
                "source": 1,
                "target": 2
              }
            ]
          }
        }
      ],
      "exceptions_to_handle": [
        {
          "lc": 1,
          "type": "not_implemented",
          "id": [
            "builtins",
            "Exception"
          ],
          "repr": "<class 'Exception'>"
        }
      ],
      "exception_key": null
    },
    "graph": {
      "nodes": [
        {
          "id": 0,
          "data": {
            "title": "FakeListLLMInput",
            "anyOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/definitions/StringPromptValue"
              },
              {
                "$ref": "#/definitions/ChatPromptValueConcrete"
              },
              {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/AIMessage"
                    },
                    {
                      "$ref": "#/definitions/HumanMessage"
                    },
                    {
                      "$ref": "#/definitions/ChatMessage"
                    },
                    {
                      "$ref": "#/definitions/SystemMessage"
                    },
                    {
                      "$ref": "#/definitions/FunctionMessage"
                    },
                    {
                      "$ref": "#/definitions/ToolMessage"
                    }
                  ]
                }
              }
            ],
            "definitions": {
              "StringPromptValue": {
                "title": "StringPromptValue",
                "description": "String prompt value.",
                "type": "object",
                "properties": {
                  "text": {
                    "title": "Text",
                    "type": "string"
                  },
                  "type": {
                    "title": "Type",
                    "default": "StringPromptValue",
                    "enum": [
                      "StringPromptValue"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "text"
                ]
              },
              "AIMessage": {
                "title": "AIMessage",
                "description": "Message from an AI.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "ai",
                    "enum": [
                      "ai"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "example": {
                    "title": "Example",
                    "default": false,
                    "type": "boolean"
                  }
                },
                "required": [
                  "content"
                ]
              },
              "HumanMessage": {
                "title": "HumanMessage",
                "description": "Message from a human.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "human",
                    "enum": [
                      "human"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "example": {
                    "title": "Example",
                    "default": false,
                    "type": "boolean"
                  }
                },
                "required": [
                  "content"
                ]
              },
              "ChatMessage": {
                "title": "ChatMessage",
                "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "chat",
                    "enum": [
                      "chat"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "role": {
                    "title": "Role",
                    "type": "string"
                  }
                },
                "required": [
                  "content",
                  "role"
                ]
              },
              "SystemMessage": {
                "title": "SystemMessage",
                "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "system",
                    "enum": [
                      "system"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  }
                },
                "required": [
                  "content"
                ]
              },
              "FunctionMessage": {
                "title": "FunctionMessage",
                "description": "Message for passing the result of executing a function back to a model.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "function",
                    "enum": [
                      "function"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  }
                },
                "required": [
                  "content",
                  "name"
                ]
              },
              "ToolMessage": {
                "title": "ToolMessage",
                "description": "Message for passing the result of executing a tool back to a model.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "tool",
                    "enum": [
                      "tool"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "tool_call_id": {
                    "title": "Tool Call Id",
                    "type": "string"
                  }
                },
                "required": [
                  "content",
                  "tool_call_id"
                ]
              },
              "ChatPromptValueConcrete": {
                "title": "ChatPromptValueConcrete",
                "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                "type": "object",
                "properties": {
                  "messages": {
                    "title": "Messages",
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/AIMessage"
                        },
                        {
                          "$ref": "#/definitions/HumanMessage"
                        },
                        {
                          "$ref": "#/definitions/ChatMessage"
                        },
                        {
                          "$ref": "#/definitions/SystemMessage"
                        },
                        {
                          "$ref": "#/definitions/FunctionMessage"
                        },
                        {
                          "$ref": "#/definitions/ToolMessage"
                        }
                      ]
                    }
                  },
                  "type": {
                    "title": "Type",
                    "default": "ChatPromptValueConcrete",
                    "enum": [
                      "ChatPromptValueConcrete"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "messages"
                ]
              }
            }
          }
        },
        {
          "id": 1,
          "data": "WithFallbacks"
        },
        {
          "id": 2,
          "data": {
            "title": "FakeListLLMOutput",
            "type": "string"
          }
        }
      ],
      "edges": [
        {
          "source": 0,
          "target": 1
        },
        {
          "source": 1,
          "target": 2
        }
      ]
    }
  }
  '''
# ---
# name: test_fallbacks[llm_multi]
  '''
  {
    "lc": 1,
    "type": "constructor",
    "id": [
      "langchain",
      "schema",
      "runnable",
      "RunnableWithFallbacks"
    ],
    "kwargs": {
      "runnable": {
        "lc": 1,
        "type": "not_implemented",
        "id": [
          "tests",
          "unit_tests",
          "fake",
          "llm",
          "FakeListLLM"
        ],
        "repr": "FakeListLLM(responses=['foo'], i=1)",
        "graph": {
          "nodes": [
            {
              "id": 0,
              "data": {
                "title": "FakeListLLMInput",
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "$ref": "#/definitions/StringPromptValue"
                  },
                  {
                    "$ref": "#/definitions/ChatPromptValueConcrete"
                  },
                  {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/AIMessage"
                        },
                        {
                          "$ref": "#/definitions/HumanMessage"
                        },
                        {
                          "$ref": "#/definitions/ChatMessage"
                        },
                        {
                          "$ref": "#/definitions/SystemMessage"
                        },
                        {
                          "$ref": "#/definitions/FunctionMessage"
                        },
                        {
                          "$ref": "#/definitions/ToolMessage"
                        }
                      ]
                    }
                  }
                ],
                "definitions": {
                  "StringPromptValue": {
                    "title": "StringPromptValue",
                    "description": "String prompt value.",
                    "type": "object",
                    "properties": {
                      "text": {
                        "title": "Text",
                        "type": "string"
                      },
                      "type": {
                        "title": "Type",
                        "default": "StringPromptValue",
                        "enum": [
                          "StringPromptValue"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "text"
                    ]
                  },
                  "AIMessage": {
                    "title": "AIMessage",
                    "description": "Message from an AI.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "ai",
                        "enum": [
                          "ai"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "example": {
                        "title": "Example",
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "content"
                    ]
                  },
                  "HumanMessage": {
                    "title": "HumanMessage",
                    "description": "Message from a human.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "human",
                        "enum": [
                          "human"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "example": {
                        "title": "Example",
                        "default": false,
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "content"
                    ]
                  },
                  "ChatMessage": {
                    "title": "ChatMessage",
                    "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "chat",
                        "enum": [
                          "chat"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "role": {
                        "title": "Role",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content",
                      "role"
                    ]
                  },
                  "SystemMessage": {
                    "title": "SystemMessage",
                    "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "system",
                        "enum": [
                          "system"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content"
                    ]
                  },
                  "FunctionMessage": {
                    "title": "FunctionMessage",
                    "description": "Message for passing the result of executing a function back to a model.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "function",
                        "enum": [
                          "function"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content",
                      "name"
                    ]
                  },
                  "ToolMessage": {
                    "title": "ToolMessage",
                    "description": "Message for passing the result of executing a tool back to a model.",
                    "type": "object",
                    "properties": {
                      "content": {
                        "title": "Content",
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "object"
                                }
                              ]
                            }
                          }
                        ]
                      },
                      "additional_kwargs": {
                        "title": "Additional Kwargs",
                        "type": "object"
                      },
                      "type": {
                        "title": "Type",
                        "default": "tool",
                        "enum": [
                          "tool"
                        ],
                        "type": "string"
                      },
                      "name": {
                        "title": "Name",
                        "type": "string"
                      },
                      "tool_call_id": {
                        "title": "Tool Call Id",
                        "type": "string"
                      }
                    },
                    "required": [
                      "content",
                      "tool_call_id"
                    ]
                  },
                  "ChatPromptValueConcrete": {
                    "title": "ChatPromptValueConcrete",
                    "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                    "type": "object",
                    "properties": {
                      "messages": {
                        "title": "Messages",
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "$ref": "#/definitions/AIMessage"
                            },
                            {
                              "$ref": "#/definitions/HumanMessage"
                            },
                            {
                              "$ref": "#/definitions/ChatMessage"
                            },
                            {
                              "$ref": "#/definitions/SystemMessage"
                            },
                            {
                              "$ref": "#/definitions/FunctionMessage"
                            },
                            {
                              "$ref": "#/definitions/ToolMessage"
                            }
                          ]
                        }
                      },
                      "type": {
                        "title": "Type",
                        "default": "ChatPromptValueConcrete",
                        "enum": [
                          "ChatPromptValueConcrete"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "messages"
                    ]
                  }
                }
              }
            },
            {
              "id": 1,
              "data": "FakeListLLM"
            },
            {
              "id": 2,
              "data": {
                "title": "FakeListLLMOutput",
                "type": "string"
              }
            }
          ],
          "edges": [
            {
              "source": 0,
              "target": 1
            },
            {
              "source": 1,
              "target": 2
            }
          ]
        }
      },
      "fallbacks": [
        {
          "lc": 1,
          "type": "not_implemented",
          "id": [
            "tests",
            "unit_tests",
            "fake",
            "llm",
            "FakeListLLM"
          ],
          "repr": "FakeListLLM(responses=['baz'], i=1)",
          "graph": {
            "nodes": [
              {
                "id": 0,
                "data": {
                  "title": "FakeListLLMInput",
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/definitions/StringPromptValue"
                    },
                    {
                      "$ref": "#/definitions/ChatPromptValueConcrete"
                    },
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "$ref": "#/definitions/AIMessage"
                          },
                          {
                            "$ref": "#/definitions/HumanMessage"
                          },
                          {
                            "$ref": "#/definitions/ChatMessage"
                          },
                          {
                            "$ref": "#/definitions/SystemMessage"
                          },
                          {
                            "$ref": "#/definitions/FunctionMessage"
                          },
                          {
                            "$ref": "#/definitions/ToolMessage"
                          }
                        ]
                      }
                    }
                  ],
                  "definitions": {
                    "StringPromptValue": {
                      "title": "StringPromptValue",
                      "description": "String prompt value.",
                      "type": "object",
                      "properties": {
                        "text": {
                          "title": "Text",
                          "type": "string"
                        },
                        "type": {
                          "title": "Type",
                          "default": "StringPromptValue",
                          "enum": [
                            "StringPromptValue"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "text"
                      ]
                    },
                    "AIMessage": {
                      "title": "AIMessage",
                      "description": "Message from an AI.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "ai",
                          "enum": [
                            "ai"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "example": {
                          "title": "Example",
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "HumanMessage": {
                      "title": "HumanMessage",
                      "description": "Message from a human.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "human",
                          "enum": [
                            "human"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "example": {
                          "title": "Example",
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "ChatMessage": {
                      "title": "ChatMessage",
                      "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "chat",
                          "enum": [
                            "chat"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "role": {
                          "title": "Role",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "role"
                      ]
                    },
                    "SystemMessage": {
                      "title": "SystemMessage",
                      "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "system",
                          "enum": [
                            "system"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "FunctionMessage": {
                      "title": "FunctionMessage",
                      "description": "Message for passing the result of executing a function back to a model.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "function",
                          "enum": [
                            "function"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "name"
                      ]
                    },
                    "ToolMessage": {
                      "title": "ToolMessage",
                      "description": "Message for passing the result of executing a tool back to a model.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "tool",
                          "enum": [
                            "tool"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "tool_call_id": {
                          "title": "Tool Call Id",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "tool_call_id"
                      ]
                    },
                    "ChatPromptValueConcrete": {
                      "title": "ChatPromptValueConcrete",
                      "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                      "type": "object",
                      "properties": {
                        "messages": {
                          "title": "Messages",
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "$ref": "#/definitions/AIMessage"
                              },
                              {
                                "$ref": "#/definitions/HumanMessage"
                              },
                              {
                                "$ref": "#/definitions/ChatMessage"
                              },
                              {
                                "$ref": "#/definitions/SystemMessage"
                              },
                              {
                                "$ref": "#/definitions/FunctionMessage"
                              },
                              {
                                "$ref": "#/definitions/ToolMessage"
                              }
                            ]
                          }
                        },
                        "type": {
                          "title": "Type",
                          "default": "ChatPromptValueConcrete",
                          "enum": [
                            "ChatPromptValueConcrete"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "messages"
                      ]
                    }
                  }
                }
              },
              {
                "id": 1,
                "data": "FakeListLLM"
              },
              {
                "id": 2,
                "data": {
                  "title": "FakeListLLMOutput",
                  "type": "string"
                }
              }
            ],
            "edges": [
              {
                "source": 0,
                "target": 1
              },
              {
                "source": 1,
                "target": 2
              }
            ]
          }
        },
        {
          "lc": 1,
          "type": "not_implemented",
          "id": [
            "tests",
            "unit_tests",
            "fake",
            "llm",
            "FakeListLLM"
          ],
          "repr": "FakeListLLM(responses=['bar'])",
          "graph": {
            "nodes": [
              {
                "id": 0,
                "data": {
                  "title": "FakeListLLMInput",
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/definitions/StringPromptValue"
                    },
                    {
                      "$ref": "#/definitions/ChatPromptValueConcrete"
                    },
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "$ref": "#/definitions/AIMessage"
                          },
                          {
                            "$ref": "#/definitions/HumanMessage"
                          },
                          {
                            "$ref": "#/definitions/ChatMessage"
                          },
                          {
                            "$ref": "#/definitions/SystemMessage"
                          },
                          {
                            "$ref": "#/definitions/FunctionMessage"
                          },
                          {
                            "$ref": "#/definitions/ToolMessage"
                          }
                        ]
                      }
                    }
                  ],
                  "definitions": {
                    "StringPromptValue": {
                      "title": "StringPromptValue",
                      "description": "String prompt value.",
                      "type": "object",
                      "properties": {
                        "text": {
                          "title": "Text",
                          "type": "string"
                        },
                        "type": {
                          "title": "Type",
                          "default": "StringPromptValue",
                          "enum": [
                            "StringPromptValue"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "text"
                      ]
                    },
                    "AIMessage": {
                      "title": "AIMessage",
                      "description": "Message from an AI.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "ai",
                          "enum": [
                            "ai"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "example": {
                          "title": "Example",
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "HumanMessage": {
                      "title": "HumanMessage",
                      "description": "Message from a human.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "human",
                          "enum": [
                            "human"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "example": {
                          "title": "Example",
                          "default": false,
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "ChatMessage": {
                      "title": "ChatMessage",
                      "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "chat",
                          "enum": [
                            "chat"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "role": {
                          "title": "Role",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "role"
                      ]
                    },
                    "SystemMessage": {
                      "title": "SystemMessage",
                      "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "system",
                          "enum": [
                            "system"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content"
                      ]
                    },
                    "FunctionMessage": {
                      "title": "FunctionMessage",
                      "description": "Message for passing the result of executing a function back to a model.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "function",
                          "enum": [
                            "function"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "name"
                      ]
                    },
                    "ToolMessage": {
                      "title": "ToolMessage",
                      "description": "Message for passing the result of executing a tool back to a model.",
                      "type": "object",
                      "properties": {
                        "content": {
                          "title": "Content",
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "additional_kwargs": {
                          "title": "Additional Kwargs",
                          "type": "object"
                        },
                        "type": {
                          "title": "Type",
                          "default": "tool",
                          "enum": [
                            "tool"
                          ],
                          "type": "string"
                        },
                        "name": {
                          "title": "Name",
                          "type": "string"
                        },
                        "tool_call_id": {
                          "title": "Tool Call Id",
                          "type": "string"
                        }
                      },
                      "required": [
                        "content",
                        "tool_call_id"
                      ]
                    },
                    "ChatPromptValueConcrete": {
                      "title": "ChatPromptValueConcrete",
                      "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                      "type": "object",
                      "properties": {
                        "messages": {
                          "title": "Messages",
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "$ref": "#/definitions/AIMessage"
                              },
                              {
                                "$ref": "#/definitions/HumanMessage"
                              },
                              {
                                "$ref": "#/definitions/ChatMessage"
                              },
                              {
                                "$ref": "#/definitions/SystemMessage"
                              },
                              {
                                "$ref": "#/definitions/FunctionMessage"
                              },
                              {
                                "$ref": "#/definitions/ToolMessage"
                              }
                            ]
                          }
                        },
                        "type": {
                          "title": "Type",
                          "default": "ChatPromptValueConcrete",
                          "enum": [
                            "ChatPromptValueConcrete"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "messages"
                      ]
                    }
                  }
                }
              },
              {
                "id": 1,
                "data": "FakeListLLM"
              },
              {
                "id": 2,
                "data": {
                  "title": "FakeListLLMOutput",
                  "type": "string"
                }
              }
            ],
            "edges": [
              {
                "source": 0,
                "target": 1
              },
              {
                "source": 1,
                "target": 2
              }
            ]
          }
        }
      ],
      "exceptions_to_handle": [
        {
          "lc": 1,
          "type": "not_implemented",
          "id": [
            "builtins",
            "Exception"
          ],
          "repr": "<class 'Exception'>"
        }
      ],
      "exception_key": null
    },
    "graph": {
      "nodes": [
        {
          "id": 0,
          "data": {
            "title": "FakeListLLMInput",
            "anyOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/definitions/StringPromptValue"
              },
              {
                "$ref": "#/definitions/ChatPromptValueConcrete"
              },
              {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/AIMessage"
                    },
                    {
                      "$ref": "#/definitions/HumanMessage"
                    },
                    {
                      "$ref": "#/definitions/ChatMessage"
                    },
                    {
                      "$ref": "#/definitions/SystemMessage"
                    },
                    {
                      "$ref": "#/definitions/FunctionMessage"
                    },
                    {
                      "$ref": "#/definitions/ToolMessage"
                    }
                  ]
                }
              }
            ],
            "definitions": {
              "StringPromptValue": {
                "title": "StringPromptValue",
                "description": "String prompt value.",
                "type": "object",
                "properties": {
                  "text": {
                    "title": "Text",
                    "type": "string"
                  },
                  "type": {
                    "title": "Type",
                    "default": "StringPromptValue",
                    "enum": [
                      "StringPromptValue"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "text"
                ]
              },
              "AIMessage": {
                "title": "AIMessage",
                "description": "Message from an AI.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "ai",
                    "enum": [
                      "ai"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "example": {
                    "title": "Example",
                    "default": false,
                    "type": "boolean"
                  }
                },
                "required": [
                  "content"
                ]
              },
              "HumanMessage": {
                "title": "HumanMessage",
                "description": "Message from a human.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "human",
                    "enum": [
                      "human"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "example": {
                    "title": "Example",
                    "default": false,
                    "type": "boolean"
                  }
                },
                "required": [
                  "content"
                ]
              },
              "ChatMessage": {
                "title": "ChatMessage",
                "description": "Message that can be assigned an arbitrary speaker (i.e. role).",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "chat",
                    "enum": [
                      "chat"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "role": {
                    "title": "Role",
                    "type": "string"
                  }
                },
                "required": [
                  "content",
                  "role"
                ]
              },
              "SystemMessage": {
                "title": "SystemMessage",
                "description": "Message for priming AI behavior, usually passed in as the first of a sequence\nof input messages.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "system",
                    "enum": [
                      "system"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  }
                },
                "required": [
                  "content"
                ]
              },
              "FunctionMessage": {
                "title": "FunctionMessage",
                "description": "Message for passing the result of executing a function back to a model.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "function",
                    "enum": [
                      "function"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  }
                },
                "required": [
                  "content",
                  "name"
                ]
              },
              "ToolMessage": {
                "title": "ToolMessage",
                "description": "Message for passing the result of executing a tool back to a model.",
                "type": "object",
                "properties": {
                  "content": {
                    "title": "Content",
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "object"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "additional_kwargs": {
                    "title": "Additional Kwargs",
                    "type": "object"
                  },
                  "type": {
                    "title": "Type",
                    "default": "tool",
                    "enum": [
                      "tool"
                    ],
                    "type": "string"
                  },
                  "name": {
                    "title": "Name",
                    "type": "string"
                  },
                  "tool_call_id": {
                    "title": "Tool Call Id",
                    "type": "string"
                  }
                },
                "required": [
                  "content",
                  "tool_call_id"
                ]
              },
              "ChatPromptValueConcrete": {
                "title": "ChatPromptValueConcrete",
                "description": "Chat prompt value which explicitly lists out the message types it accepts.\nFor use in external schemas.",
                "type": "object",
                "properties": {
                  "messages": {
                    "title": "Messages",
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/AIMessage"
                        },
                        {
                          "$ref": "#/definitions/HumanMessage"
                        },
                        {
                          "$ref": "#/definitions/ChatMessage"
                        },
                        {
                          "$ref": "#/definitions/SystemMessage"
                        },
                        {
                          "$ref": "#/definitions/FunctionMessage"
                        },
                        {
                          "$ref": "#/definitions/ToolMessage"
                        }
                      ]
                    }
                  },
                  "type": {
                    "title": "Type",
                    "default": "ChatPromptValueConcrete",
                    "enum": [
                      "ChatPromptValueConcrete"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "messages"
                ]
              }
            }
          }
        },
        {
          "id": 1,
          "data": "WithFallbacks"
        },
        {
          "id": 2,
          "data": {
            "title": "FakeListLLMOutput",
            "type": "string"
          }
        }
      ],
      "edges": [
        {
          "source": 0,
          "target": 1
        },
        {
          "source": 1,
          "target": 2
        }
      ]
    }
  }
  '''
# ---
